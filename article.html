<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>[Paper Title] - Ph.D. Student Blog</title>
    <!-- Add Font Awesome icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f5f5f5;
        }
        
        header {
            background-color: #2c3e50;
            color: white;
            padding: 1rem 0;
            text-align: center;
        }
        
        nav {
            background-color: #34495e;
            padding: 0.5rem 0;
        }
        
        nav ul {
            list-style: none;
            display: flex;
            justify-content: center;
        }
        
        nav ul li {
            margin: 0 1rem;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            transition: background-color 0.3s;
        }
        
        nav ul li a:hover {
            background-color: #2c3e50;
        }
        
        main {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }
        
        /* Paper Details Page Styles */
        .paper-details {
            background-color: white;
            padding: 3rem 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
        }
        
        .paper-details h1 {
            color: #2c3e50;
            margin-bottom: 1rem;
            font-size: 2rem;
            text-align: center;
        }
        
        .paper-authors {
            color: #7f8c8d;
            margin-bottom: 1rem;
            text-align: center;
            font-size: 1.1rem;
        }
        
        .paper-journal {
            font-style: italic;
            margin-bottom: 2rem;
            text-align: center;
            color: #555;
        }
        
        .paper-section {
            margin-bottom: 2rem;
        }
        
        .paper-section h2 {
            color: #3498db;
            margin-bottom: 1rem;
            font-size: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #3498db;
        }
        
        .paper-section p {
            margin-bottom: 1rem;
            text-align: justify;
        }
        
        .paper-links {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 2rem;
        }
        
        .btn {
            display: inline-block;
            background-color: #3498db;
            color: white;
            padding: 0.75rem 1.5rem;
            text-decoration: none;
            border-radius: 6px;
            transition: background-color 0.3s, transform 0.2s;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background-color: #95a5a6;
        }
        
        .btn-secondary:hover {
            background-color: #7f8c8d;
        }
        
        .back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: #3498db;
            text-decoration: none;
            margin-bottom: 2rem;
            font-size: 1rem;
        }
        
        .back-link:hover {
            text-decoration: underline;
        }
        
        footer {
            background-color: #2c3e50;
            color: white;
            text-align: center;
            padding: 1rem 0;
            margin-top: 2rem;
        }
        
        @media (max-width: 768px) {
            .paper-links {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Ph.D. Student Blog</h1>
        <p>Focused on research outcomes and resource sharing</p>
    </header>
    
    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="research.html">Research</a></li>
        </ul>
    </nav>
    
    <main>
        <div class="container">
            <!-- Back Link -->
            <a href="research.html" class="back-link">
                <i class="fas fa-arrow-left"></i> Back to Research
            </a>
            
            <!-- Paper Details -->
            <div class="paper-details">
                <h1 id="paper-title">[Paper Title]</h1>
                <div class="paper-authors" id="paper-authors">[Authors List]</div>
                <div class="paper-journal" id="paper-journal">[Journal/Conference Information]</div>
                
                <div class="paper-section">
                    <h2>Abstract</h2>
                    <div id="paper-abstract">[Paper Abstract]</div>
                </div>
                
                <div class="paper-section">
                    <h2>Keywords</h2>
                    <div id="paper-keywords">[Keyword 1], [Keyword 2], [Keyword 3]</div>
                </div>
                
                <div class="paper-section">
                    <h2>Research Content</h2>
                    <p>[Detailed description of research content]</p>
                    <p>[Detailed description of research content]</p>
                </div>
                
                <div class="paper-section">
                    <h2>Experimental Results</h2>
                    <p>[Detailed description of experimental results]</p>
                    <p>[Detailed description of experimental results]</p>
                </div>
                
                <div class="paper-section">
                    <h2>Conclusion</h2>
                    <p>[Conclusion content]</p>
                </div>
                
                <!-- Related Resources Links -->
                <div class="paper-links" id="paper-links">
                    <!-- Links will be dynamically generated by JavaScript -->
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <p>&copy; 2024 Ph.D. Student Blog. All rights reserved.</p>
    </footer>
    
    <script>
        // Parse TXT file content into article object
        function parseArticleTxt(content) {
            const article = {
                id: '',
                title: '',
                authors: '',
                journal: '',
                abstract: '',
                doi: '',
                type: 'journal',
                year: 2024,
                keywords: '',
                pdf_url: '#',
                code_url: '#',
                dataset_url: '#',
                supplementary_url: '#',
                url: '#'
            };
            
            // Handle both Windows (CRLF) and Unix (LF) line endings
            const lines = content.split(/\r?\n/);
            let currentKey = null;
            let currentValue = '';
            
            lines.forEach(line => {
                line = line.trim();
                if (line.includes(':')) {
                    if (currentKey) {
                        article[currentKey] = currentValue.trim();
                    }
                    const parts = line.split(':', 2);
                    currentKey = parts[0].trim();
                    currentValue = parts[1].trim();
                } else if (line && currentKey) {
                    currentValue += '\n' + line;
                }
            });
            
            if (currentKey) {
                article[currentKey] = currentValue.trim();
            }
            
            // Convert year to number
            if (article.year) {
                article.year = parseInt(article.year);
            }
            
            return article;
        }
        
        // Load article ID from URL and fetch data when page loads
        window.addEventListener('load', function() {
            // Get article ID from URL
            const urlParams = new URLSearchParams(window.location.search);
            const articleId = urlParams.get('id');
            
            if (articleId) {
                loadArticleData(articleId);
            } else {
                // If no ID parameter, display error message
                document.getElementById('paper-title').textContent = 'Article Not Found';
                document.getElementById('paper-authors').textContent = '';
                document.getElementById('paper-journal').textContent = '';
                document.getElementById('paper-abstract').innerHTML = '<p>Could not find the requested article. Please check the URL.</p>';
                document.getElementById('paper-keywords').textContent = '';
            }
        });
        
        // Load article data from TXT file
        async function loadArticleData(articleId) {
            try {
                // Define article folder mapping
                const articleFolders = {
                    'latest-paper': 'article1',
                    'paper2': 'article2',
                    'paper3': 'article3',
                    'paper4': 'article4',
                    'paper5': 'article5'
                };
                
                // Get article folder name
                const folderName = articleFolders[articleId];
                if (!folderName) {
                    throw new Error('Article ID does not exist');
                }
                
                // Load article config file (TXT format)
                const response = await fetch(`articles/${folderName}/config.txt`);
                if (!response.ok) {
                    throw new Error('Config file does not exist');
                }
                
                const text = await response.text();
                const article = parseArticleTxt(text);
                displayArticleData(article);
            } catch (error) {
                console.error('Failed to load article:', error);
                document.getElementById('paper-title').textContent = 'Failed to Load Article';
                document.getElementById('paper-authors').textContent = '';
                document.getElementById('paper-journal').textContent = '';
                document.getElementById('paper-abstract').innerHTML = `<p>Failed to load article: ${error.message}</p>`;
                document.getElementById('paper-keywords').textContent = '';
            }
        }
        
        // Display article data
        function displayArticleData(article) {
            // Set page title
            document.title = `${article.title} - Ph.D. Student Blog`;
            
            // Fill article content
            document.getElementById('paper-title').textContent = article.title;
            document.getElementById('paper-authors').textContent = article.authors;
            
            // Set journal and DOI information
            let journalContent = article.journal;
            if (article.doi && article.doi !== '#') {
                journalContent += ` | DOI: <a href="https://doi.org/${article.doi}" target="_blank">${article.doi}</a>`;
            }
            document.getElementById('paper-journal').innerHTML = journalContent;
            
            document.getElementById('paper-abstract').innerHTML = article.abstract.split('\n').map(p => `<p>${p}</p>`).join('');
            
            // Set keywords (if available)
            if (article.keywords) {
                document.getElementById('paper-keywords').textContent = article.keywords;
            }
            
            // Generate related resource links
            const paperLinks = document.getElementById('paper-links');
            paperLinks.innerHTML = '';
            
            // Add PDF link
            if (article.pdf_url && article.pdf_url !== '#') {
                const pdfLink = document.createElement('a');
                pdfLink.href = article.pdf_url;
                pdfLink.className = 'btn';
                pdfLink.innerHTML = '<i class="fas fa-file-pdf"></i> Download PDF';
                paperLinks.appendChild(pdfLink);
            }
            
            // Add Code link
            if (article.code_url && article.code_url !== '#') {
                const codeLink = document.createElement('a');
                codeLink.href = article.code_url;
                codeLink.className = 'btn btn-secondary';
                codeLink.innerHTML = '<i class="fas fa-code"></i> Code';
                paperLinks.appendChild(codeLink);
            }
            
            // Add Dataset link
            if (article.dataset_url && article.dataset_url !== '#') {
                const datasetLink = document.createElement('a');
                datasetLink.href = article.dataset_url;
                datasetLink.className = 'btn btn-secondary';
                datasetLink.innerHTML = '<i class="fas fa-database"></i> Dataset';
                paperLinks.appendChild(datasetLink);
            }
            
            // Add Supplementary Materials link
            if (article.supplementary_url && article.supplementary_url !== '#') {
                const supplementaryLink = document.createElement('a');
                supplementaryLink.href = article.supplementary_url;
                supplementaryLink.className = 'btn btn-secondary';
                supplementaryLink.innerHTML = '<i class="fas fa-file-alt"></i> Supplementary Materials';
                paperLinks.appendChild(supplementaryLink);
            }
            
            // Add Project link
            if (article.url && article.url !== '#') {
                const projectLink = document.createElement('a');
                projectLink.href = article.url;
                projectLink.className = 'btn';
                projectLink.innerHTML = '<i class="fas fa-external-link-alt"></i> Project';
                paperLinks.appendChild(projectLink);
            }
        }
    </script>
</body>
</html>